{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "data": {"url": "data/Trees__with_species_and_dimensions__Urban_Forest_.csv"},
  "title": "Most Common Type of Tree in Melbourne",
  "height": 300,
  "width": 300,
  "mark": {"type":"bar","color":"green"},
  "transform": [
    {
      "aggregate": [
        {
          "op": "count",
          "field": "Common Name",
          "as": "aggregated_common_count"
        }
      ],
      "groupby": ["Common Name", "Genus"]
    },
    {
      "window": [{"op": "rank", "as": "rank"}],
      "sort": [
        {"field": "aggregated_common_count", "order": "descending"}
      ]
    },
    {"filter": "datum.rank < 10"}
  ],
  "encoding": {
        "x": {
          "field": "aggregated_common_count",
          "type": "quantitative",
          "title": "Count of Tree"
        },
        "y": {
          "field": "Genus",
          "type": "nominal",
          "sort": {
            "field": "aggregated_common_count",
            "order": "descending"}}
  },
  "config": {"background": "#E0ECF4",  "style": {
    "cell": {
      "stroke": "transparent"
    }
  }}
}